---
layout: post
title:  "event 2019-03-19"
---

CHAPTER 07 이벤트 다루기
=============

Lesson 01 이벤트 소개
-------------

#### 이벤트와 관련된 용어와 개념을 배웁니다.

<br><br>
### 01_이벤트란?

이벤트란 일종의 알림 기능입니다.

![Untitled-1](https://user-images.githubusercontent.com/42795906/54572236-ca520c00-4a29-11e9-9a80-e609d5827568.jpg)

> 웹페이지에서도 사용자가 마우스를 클릭하거나 키보드 키를 입력하면 브라우저는 입력정보를 이벤트에 담아 개발자에게 알려줍니다. 개발자는 이 정보를 받아 지금까지 앞에서 다룬 예제에서처럼 용도에 맞게 사용합니다.

<br><br>
### 02_이벤트 종류

#### 이벤트는 크게 네가지 종류로 분류할 수 있습니다.

- 마우스 이벤트 : 사용자가 마우스 버튼을 눌렀을때 발생하는 이벤트.

- 키보드 이벤트 : 사용자가 키보드를 눌렀을때 발생하는 이벤트.

- 태그요소 이벤트 : 엘리언트마다 발생하는 고유의 이벤트. img 태그요소의 경우 이미지가 모드 로드되면 load이벤트를 발생시켜 이미지가 성공적으로 로드되었음을 알리며, input 태그요소의 경우 입력한 정보가 바뀌면 change 이벤트를 발생시켜 입력 정보가 변경됐음을 알립니다.

- 사용자 정의 이벤트 : 개발자가 직접 만들어 사용하는 이벤트. 주로 개발자 고유 라이브러리 또는 클래스를 만들고 이를 사용한 어떤 작업이 끝났음을 사용자에게 알려줄때 개발자만의 이벤트를 만들어 사용합니다.

<br><br>
### 03_이벤트 단계

[이벤트 단계](https://jsfiddle.net/74n1ckd6/2/)

#### 1. 단계 : 캡처 단계

![Untitled-1](https://user-images.githubusercontent.com/42795906/54651495-7d883700-4af6-11e9-91e7-4b29862b95fd.jpg)

> 이벤트흐름 : 이벤트 흐름은 오직 DOM 노드 객체를 따라 이동한다는 점입니다. 사용자가 만든 객채에서는 절대 일어나지 않을뿐더러 이벤트를 흐르게 할수도 없습니다.
> e.eventPhase 프로퍼티 : 예제 코드에서 eventPhase는 이벤트 단계를 알수있는 프로퍼티입니다.

> 1 = 캡쳐, 2 = 타깃, 3 = 버블링

#### 01. 캡처 단계 설명

가장 먼저 실행되는 이벤트 단계로서, 가장 최상위 노드인 document에서 시작해 html 태그와 body 태그를 거쳐 실제 이벤트를 발생시킨 B2 노드 전까지 캡쳐 단계라고 부릅니다. 이때 만나는 노드 중 캡처 단계에 이벤트 리스너가 등록돼있다면 이벤트 리스너가 실행됩니다. 

![Untitled-1](https://user-images.githubusercontent.com/42795906/54651831-e328f300-4af7-11e9-99bf-24e1bd89b6de.jpg)

실행 결과 중 eventPhase 속성값이 1로 출력되는 이벤트 리스너가 바로 캡처 단계에 실행된 이벤트리스너 입니다. 

#### 02. 이벤트 등록 방법

> $대상.get(0).addEventListener(이벤트이름, 리스너, true);

jquery의 경우 캡처 단계에 이벤트를 등록하는 기능을 제공하지 않습니다. 즉 다음과 같이 juqery 내부에 들어있는 자바스크립트 DOM에 접근해 자바스크립트 방식으로 이벤트를 등록해야 합니다. 

자바스크립트에서 캡처 단계에 이벤트를 등록하는 방법은 addEventListener() 마지막 인자값에 ture를 넣어주면 됩니다. 

#### 03. 캡처 단계 용도

캡처 단계를 사용하는 이유는 뭘까요? 주로 타깃/버블링 단계의 이벤트 실행전에 처리해야 할 사전 작업 또는 타깃/버블링 단계 이벤트 처리를 제어하는 용도로 가끔 사용합니다. 

> 예) 캡처 단계를 도중에 막아버리면 이벤트 흐름이 끊겨 이후 캡처와 타깃 단계가 진행되지 않으므로 등록된 이벤트도 실행되지 않습니다.

#### 2. 단계 : 타깃 단계

#### 01. 타깃 단계 설명

타깃 단계는 이벤트 흐름이 이벤트를 발생시킨 노드에 머무르는 단계를 말하며, 이때 이벤트를 발생시킨 노드에 이벤트가 등록되어 있다면 리스너가 실행됩니다.

![Untitled-1](https://user-images.githubusercontent.com/42795906/54652612-ca6e0c80-4afa-11e9-8a34-33645214425b.jpg)

#### 02. 이벤트 등록 방법

> $대상.on(이벤트이름, 리스너, true);

> $대상.addEventListener(이벤트이름, 리스너, false);

on() 메서드와 같은 jquery 이벤트 관련 메서드를 사용해 이벤트를 등록하는 경우 기본적으로 타깃과 캡처 단계에 등록됩니다.

#### 3. 단계 : 버블링 단계

#### 01. 버블링 단계 설명

버블 단계는 캡처 단계의 역순으로 흐르는 단계를 의미합니다. 이때 만나는 노드에 버블 단계의 이벤트가 등록돼 있다면 리스너가 실행됩니다.

#### 02. 이벤트 등록 방법

> $대상.on(이벤트이름, 리스너);

타깃 단계와 버블 단계에 이벤트를 등록하는 방법은 동일합니다. 타깃 단계인지 버블 단계인지 구분할때는 eventPhase 속성을 사용하면 됩니다.

- 여기서 알아둬야할 사항은, 모든 이벤트가 버블링이 발생하지는 않는다는 것입니다. 또한 버블링이 발생하는 이벤트의 경우 버블링을 도중에 멈출수도 있다는 것입니다. 이와 관련된 내용을 이해하기 위해서는 Event 객체에 대해 알아야 합니다. 

<br><br>
### 04_이벤트 객체

#### 이벤트 객채의 용도

Event 객체는 이벤트를 발생시키는 곳에서 이벤트와 관련된 정보를 담아 외부로 보낼 때 사용하는 일종이 저장소입니다.

예를들어 사용자가 웹페이지의 특정 요소를 클릭하면 브라우저는 클릭한 마우스 버튼 정보와 클릭한 위치 정보 그리고 어떤 요소에서 이벤트가 발생했는지에 대한 정보 등을 event 객체의 자식 객체인 MouseEvent 객체에 가득 담아 사용자에게 알려줍니다.

#### Event 객체 구조

![Untitled-1](https://user-images.githubusercontent.com/42795906/54661314-031edd80-4b1d-11e9-94ef-8e16b4c5bf26.jpg)

> 이벤트 객체에는 이벤트와 관련된 기본 기능이 구현돼있습니다. 이벤트 객체는 MouseEvent등의 부모 객체이기도 합니다.

![Untitled-2](https://user-images.githubusercontent.com/42795906/54661448-92c48c00-4b1d-11e9-9109-5ecc1d2c35e4.jpg)

> Event 기능 가운데 반드시 알고 있어야 할 핵심 프로퍼티와 메서드는 다음과 같습니다.

#### eventPhase

이 프러퍼티에는 현재 이벤트의 위치에 관한 정보가 담겨있습니다.

1 = 캡쳐 단계, 2 = 타겟 단계, 3 = 버블링 단계

#### type

발생한 이벤트 이름

#### target

실제 이벤트를 발생시킨 대상

#### currentTarget

캡처링 단계와 버블링 단계를 거치면서 만나게 되는 객체에 이벤트 리스너가 등록돼 있을경우 리스너가 실행되는데, 이때 리스너를 가지고 있는 대상이 담겨있습니다. 이벤트 단계에 따라 target과 currentTarget은 같을수도 있고 다를수도 있습니다. 이 속성 사용법은 핵심 07. 버블링 활용 : 하나의 이벤트 리스너로 여러 이벤트 처리하기'에서 볼 수 있습니다.

#### cancelable과 preventDefault()

이 프로퍼티와 메서드를 이해하려면 기본 행동에 대해 알아야합니다. 기본행동이란, 특정 이벤트 발생 후 실행되는 기능을 이야기 합니다. 예를 들어 <a href=""></a> 태그에서 링크를 클릭하면 click 마우스 이벤트가 발생한 후 해당 페이지로 이동합니다. 바로 클릭 후 링크로 이동하는 행동이 바로 기본행동 중 하나입니다. 이때 기본행동을 취소하게되면 링크 이동이 발생하지 않게 됩니다. 
기본 행동은 cancelable 프로퍼티 값이 true인 경우 preventDefault()를 이용해 기본 행동이 실행되지 않게 취소할수 있습니다. 
기본 행동은 '핵심 05 : 기본행동 취소'에서 자세히 알아보겠습니다.

#### bubbles와 stopPrepagation()

bubbles가 true 라면 현재 발생한 이벤트는 버블링이 발생하는 이벤트이며 이때 버블링 도중 중지시켜야 하는 경우 stopPrepagation() 메서드를 사용하면 됩니다. 
이 속성과 메서드는 '핵심 06 : 버블링 멈추기' 에서 자세히 알아보겠습니다.

> 이벤트 명세서에는 다음과 같이 버블링의 발생 여부와 기본행동의 취소 가능 여부가 모두 작성돼있습니다.

![Untitled-3](https://user-images.githubusercontent.com/42795906/54666555-631d8000-4b2d-11e9-9c4b-3680d95b141b.jpg)

> 이를 바탕으로 실제 이벤트를 처리할 때 반드시 알아야 할 핵심 내용을 살펴보겠습니다.

<br><br><br>
Lesson 02 핵심 내용
-------------

### jquery에서 제공하는 이벤트 내용 중 실무를 진행하기 위해서 반드시 알고 있어야 하는 이벤트 핵심 내용은 다음과 같습니다. 

> 핵심 01 : 일반 이벤트 등록

> 핵심 02 : 단축 이벤트 등록

> 핵심 03 : 등록한 이벤트 제거

> 핵심 04 : 이벤트 한번만 실행

> 핵심 05 : 기본 행동 취소

> 핵심 06 : 버블링 멈추기

> 핵심 07 : 버블링 활용 1 : 하나의 이벤트 리스너로 여러 이벤트 처리

> 핵심 08 : 버블링 활용 2 : 라이브 이벤트

> 핵심 09 : 이벤트 발생시키기

> 핵심 10 : 사용자 정의 이벤트 만들기

> 핵심 11 : mouseover vs mouseenter 차이점

#### 핵심 01 : 일반 이벤트 등록

> $대상.on("이벤트이름",이벤트리스너);

#### 예제1 [확인버튼을 누르면 "안녕하세요" 메시지 출력해주세요] (https://jsfiddle.net/t8nqf6z7/)

> on() 메서드를 이용해 이벤트를 등록하는 가장 일반적인 방법

#### 예제2 [클릭한 메뉴 항목을 출력해주세요] (https://jsfiddle.net/sahkto95/)

<br><br>
#### 핵심 02 : 단축 이벤트 등록

> $대상.단축이벤트(이벤트리스너);

jquery에서는 일반적으로 많이 사용하는 이벤트를 좀 더 쉽게 사용할 수 있게 단축 이벤트 메서드를 가지고 있습니다.

![Untitled-4](https://user-images.githubusercontent.com/42795906/54670138-4df91f00-4b36-11e9-8d3d-c10c42a235e5.jpg)

> 단축 이벤트 메서드 내부에서는 on()메서드를 사용하기 떄문에 두 방법 중 편한 방법을 사용하면 됩니다.

[단축 이벤트 목록] (https://api.jquery.com/category/events/)

#### 예제3 [확인버튼을 누르면 "환영합니다" 메시지 출력해주세요] (https://jsfiddle.net/r01b26hn/)

<br><br>
#### 핵심 03 : 등록한 이벤트 제거

> $대상.off("click", 삭제하고 싶은 이벤트 리스너 명);

> $대상.off("click");

> $대상.off();

등록한 이벤트를 제거하려면 모두 off() 메서드를 사용하면 됩니다.

#### 예제4 [ 등록한 이벤트 제거 ] (https://jsfiddle.net/vu58fab3/)

이벤트를 제거하는 방법

1. 특정 이벤트에 대한 리스너를 제거하고 싶은 경우

> $대상.off("click", 삭제하고 싶은 이벤트 리스너 명);

2. 특정 이벤트에 걸려있는 모든 이벤트 리스너를 제거하고 싶은 경우

> $대상.off("click");

3. 모든 이벤트 종류에 상관없이 모든 이벤트를 제거하고 싶은 경우

> $대상.off();

<br><br>
#### 핵심 04 : 이벤트 한번만 실행

> $대상.one("이벤트이름", 이벤트 리스너);

이벤트를 오직 한번만 실행하고 이후 실행되지 않게 이벤트를 제거하는 경우가 있습니다. 이때 one() 메서드를 사용하면 쉽게 처리할수 있습니다.

#### 예제5 [확인버틀을클릭하면 "환영합니다"를 출력, 단 이벤트 리스너는 한번만 실행되게] (https://jsfiddle.net/p810kre6/1/)

<br><br>
#### 핵심 05 : 기본 행동 취소

> event.preventDefault();

기본 행동이란 a 태그 클릭시 click이벤트 발생 후 해당 링크로 이동하게 되는데 이런 행동을 기본 행동이라고 했습니다.

모든 이벤트가 기본 행동을 취소할수 있는건 아닙니다. 이벤트 발생 후 실행되는 기본 행동이 있는지 알려면 발생한 이벤트 객체의 cancelable 프로퍼티값을 확인하면 됩니다. 이 값이 true인 경우 이벤트 실행 후 기본행동이 실행된다는 의미입니다. 또한 이벤트 객체의 preventDefault() 메서드를 이용해 기본행동이 실행되지 않게 할수도 있습니다.


#### 기본적으로 많이 사용하는 이벤트에는 다음과 같이 기본 행동 관련 속성이 설정돼 있습니다.

![99B0E33C5C93074034](https://user-images.githubusercontent.com/42795906/54796080-17381b80-4c92-11e9-98fd-8c3f3bf2ead5.jpg)

https://www.w3.org/TR/DOM-Level-3-Events/

#### 예제6 [a 태그 클릭시 "환영합니다" 출력. 단 링크 이동은 되지 않게] (https://jsfiddle.net/tn7zbh9d/1/)

<br><br>
#### 핵심 06 : 버블링 멈추기

> event.stopPropagation();

버블링이란 이벤트 흐름의 마지막 단계의 흐름으로써 이벤트를 발생한 노드의 조상 노드를 따라 최상위 노드인 document 객체까지 흐르게 됩니다.

모든 이벤트가 버블링이 발생하는건 압니다. 이벤트가 버블링이 발생하는지 알려면 발생한 이벤트 객체의 bubbkes 프로퍼티값을 확인하면 됩니다. 이 값이 true면 이벤트 객체에서 제공하는 stopPrepagation() 메서드를 이용해 버블링을 멈출 수 있습니다.

![99E940455C93136412](https://user-images.githubusercontent.com/42795906/54801589-e1ebf780-4caa-11e9-8125-f023fdb9921b.jpg)

![99766A495C9315401B](https://user-images.githubusercontent.com/42795906/54801592-eb755f80-4caa-11e9-8ee5-b940ccca693f.jpg)

#### 예제7 [각각의 버튼을 누르면 메시지가 출력되게 버블링 관련 기능을 이용해 코드를 완성] (https://jsfiddle.net/xu7j2ewf/1/)

#### 핵심 07 : 버블링 활용 1 : 하나의 이벤트 리스너로 여러 이벤트 처리하기

> $대상.on("이벤트명", "선택자", 이벤트 리스너);

on() 메서드를 3개의 매개변수를 이용해서 호출하면 좀 더 쉽게 버블링을 이용할수 있습니다. 

#### 예제8 [클릭한 메뉴 항목을 출력] (https://jsfiddle.net/xu7j2ewf/5/)

- li의 상위 태그인 ul 태그에 click 이벤트를 등록하면 li 태그 클릭시 이벤트가 흘러(버블링) ul 태그에 등록된 이벤트 리스너가 실행됩니다.

- on()메서드의 두번째 인자에 이벤트 대상이 되는 선택자를 넣어 메서드를 호출하면 쉽게 버블링을 활용할수 있습니다.

#### 핵심 08 : 버블링 활용 2 : 라이브 이벤트

버블링을 활용하면 아직 만들어져 있지 않은 노드에서 발생하는 이벤트가지 처리할수 있습니다.

#### 예제9 동적으로 메뉴 항목을 추가하고 클릭 시 클릭한 메뉴 항목을 알려줌 

[방법1 : 메뉴 항목 추가와 동시에 이벤트 등록] (https://jsfiddle.net/3ey4rfoj/3/)

- 가장 일반적으로 사용하는 방법이지만 계속해서 이벤트 리스너를 추가해야하는 단점이 있습니다.

[방법2 : 버블링을 이용하는 방법] (https://jsfiddle.net/3ey4rfoj/7/)

- 이처럼 버블링을 이용하면 아직 존재하지 않는 메뉴 항목의 이벤트까지 처리 할수 있습니다. 이와 같이 아직 존재하지 않는 노드에 이벤트를 미리 걸어놓고 사용하는 개념을 jquery 1.7 이전 버전에서는 라이브 이벤트라고 불러 사용했습니다. 또한 라이브 이벤트 처리를 위한 live()라는 전문 메서드가 있었습니다. 1.7 이후 버전부터는 live() 메서드 역시 on() 메서드에 통합되어 on() 메서드만으로 라이브 이벤트까지 쉽게 처리할 수 있습니다.

#### 핵심 08 : 이벤트 발생시키기

> $대상.trigger("이벤트이름");

종종 실제 마우스를 클릭하지 않았지만 클릭한 것처럼 특정 노드에서 수동으로 이벤트를 발생시켜야 하는 경우가 있습니다. jquery()를 이용하면 수동으로 이벤트를 발생시킬수 있습니다. 

#### 예제10 [버튼A를 누르면 버튼B가 눌린첫처럼 이벤트 리스너가 실행] (https://jsfiddle.net/3ey4rfoj/9/)

<br><br><br>
Lesson 03 미션
-------------

